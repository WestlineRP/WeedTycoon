<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>420 Weed Smoking Clicker</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #228B22; /* Forest green */
            color: #FFFFFF;
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            overflow-y: auto;
        }
        .container {
            max-width: 1200px;
            width: 100%;
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
        }
        .game-area {
            flex: 1;
            background-color: #006400; /* Dark green */
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
        }
        .shop-area, .upgrades-area, .achievements-area, .stats-area, .prestige-area {
            flex: 1;
            background-color: #006400;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
        }
        h1, h2 {
            text-align: center;
            color: #32CD32; /* Lime green */
        }
        #clickButton {
            display: block;
            margin: 20px auto;
            padding: 20px;
            font-size: 24px;
            background-color: #32CD32;
            color: #000;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            width: 150px;
            height: 150px;
            transition: transform 0.1s;
        }
        #clickButton:hover {
            transform: scale(1.1);
        }
        #clickButton:active {
            transform: scale(0.9);
        }
        .item {
            background-color: #228B22;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .buy-button {
            background-color: #32CD32;
            color: #000;
            border: none;
            padding: 5px 10px;
            cursor: pointer;
            border-radius: 5px;
        }
        .buy-button:disabled {
            background-color: #A9A9A9;
            cursor: not-allowed;
        }
        .achievement {
            background-color: #228B22;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
        }
        .locked {
            opacity: 0.5;
        }
        .prestige-button {
            background-color: #FFD700; /* Gold */
            color: #000;
            border: none;
            padding: 10px;
            cursor: pointer;
            border-radius: 5px;
            width: 100%;
            font-size: 18px;
        }
        .prestige-button:disabled {
            background-color: #A9A9A9;
            cursor: not-allowed;
        }
        #particle-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
        }
        .particle {
            position: absolute;
            background-color: #32CD32;
            border-radius: 50%;
            opacity: 0.8;
            animation: float 2s ease-in-out infinite;
        }
        @keyframes float {
            0% { transform: translateY(0); opacity: 0.8; }
            100% { transform: translateY(-50px); opacity: 0; }
        }
    </style>
</head>
<body>
    <div id="particle-container"></div>
    <div class="container">
        <div class="game-area">
            <h1>420 Weed Smoking Clicker</h1>
            <p id="hitsDisplay">Hits: 0</p>
            <p id="hpsDisplay">Hits per second: 0</p>
            <button id="clickButton">Take a Hit! ðŸŒ¿</button>
        </div>
        
        <div class="shop-area">
            <h2>Shop</h2>
            <div id="shopItems"></div>
        </div>
        
        <div class="upgrades-area">
            <h2>Upgrades</h2>
            <div id="upgrades"></div>
        </div>
        
        <div class="achievements-area">
            <h2>Achievements</h2>
            <div id="achievements"></div>
        </div>
        
        <div class="stats-area">
            <h2>Stats</h2>
            <p id="totalHits">Total Hits: 0</p>
            <p id="totalClicks">Total Clicks: 0</p>
            <p id="prestigePoints">Prestige Points: 0</p>
            <p id="prestigeBonus">Prestige Bonus: 0%</p>
        </div>
        
        <div class="prestige-area">
            <h2>Prestige</h2>
            <p>Reset progress for permanent bonuses!</p>
            <p id="prestigeGain">Next Prestige: 0 points</p>
            <button id="prestigeButton" class="prestige-button" disabled>Prestige Now</button>
        </div>
    </div>

    <script>
        let hits = 0;
        let hitsPerSecond = 0;
        let clickValue = 1;
        let totalHits = 0;
        let totalClicks = 0;
        let prestigePoints = 0;
        let prestigeBonus = 1; // Multiplier from prestige

        // Shop items (auto-producers)
        const shopItems = [
            { name: 'Joint Roller', cost: 10, hps: 0.1, owned: 0, desc: 'Rolls joints automatically.' },
            { name: 'Bong', cost: 50, hps: 0.5, owned: 0, desc: 'Smooth hits every second.' },
            { name: 'Vape Pen', cost: 200, hps: 2, owned: 0, desc: 'Discreet auto-vaping.' },
            { name: 'Grow Tent', cost: 1000, hps: 10, owned: 0, desc: 'Grows your own supply.' },
            { name: 'Dispensary', cost: 5000, hps: 50, owned: 0, desc: 'Unlimited access.' },
            { name: 'Weed Farm', cost: 20000, hps: 200, owned: 0, desc: 'Industrial scale.' },
            { name: 'THC Lab', cost: 100000, hps: 1000, owned: 0, desc: 'Synthesizes pure THC.' },
            { name: 'Cannabis Empire', cost: 500000, hps: 5000, owned: 0, desc: 'Global domination.' }
        ];

        // Upgrades (multipliers and bonuses)
        const upgrades = [
            { name: 'Better Strain', cost: 100, effect: () => clickValue *= 2, desc: 'Doubles click value.', purchased: false },
            { name: 'Auto Inhaler', cost: 500, effect: () => hitsPerSecond *= 1.5, desc: 'Boosts HPS by 50%.', purchased: false },
            { name: 'Golden Lighter', cost: 2000, effect: () => clickValue *= 3, desc: 'Triples click value.', purchased: false },
            { name: 'Hydroponics', cost: 10000, effect: () => { shopItems.forEach(item => item.hps *= 1.2); recalculateHPS(); }, desc: '20% boost to all producers.', purchased: false },
            { name: 'Edibles Infusion', cost: 50000, effect: () => clickValue += hitsPerSecond * 0.1, desc: 'Clicks gain 10% of HPS.', purchased: false },
            { name: 'CBD Synergy', cost: 200000, effect: () => hitsPerSecond *= 2, desc: 'Doubles HPS.', purchased: false }
        ];

        // Achievements
        const achievements = [
            { name: 'First Puff', desc: 'Take your first hit.', unlocked: false, condition: () => totalClicks >= 1 },
            { name: 'Stoner', desc: 'Reach 100 hits.', unlocked: false, condition: () => totalHits >= 100 },
            { name: 'High Roller', desc: 'Own 10 Joint Rollers.', unlocked: false, condition: () => shopItems[0].owned >= 10 },
            { name: 'Baked', desc: 'Reach 1,000 hits.', unlocked: false, condition: () => totalHits >= 1000 },
            { name: 'Empire Builder', desc: 'Own a Cannabis Empire.', unlocked: false, condition: () => shopItems[7].owned >= 1 },
            { name: 'Prestige Master', desc: 'Prestige once.', unlocked: false, condition: () => prestigePoints >= 1 },
            { name: 'Click Maniac', desc: 'Click 420 times.', unlocked: false, condition: () => totalClicks >= 420 },
            { name: 'Auto High', desc: 'Reach 420 HPS.', unlocked: false, condition: () => hitsPerSecond >= 420 }
        ];

        // DOM elements
        const hitsDisplay = document.getElementById('hitsDisplay');
        const hpsDisplay = document.getElementById('hpsDisplay');
        const clickButton = document.getElementById('clickButton');
        const shopItemsDiv = document.getElementById('shopItems');
        const upgradesDiv = document.getElementById('upgrades');
        const achievementsDiv = document.getElementById('achievements');
        const totalHitsP = document.getElementById('totalHits');
        const totalClicksP = document.getElementById('totalClicks');
        const prestigePointsP = document.getElementById('prestigePoints');
        const prestigeBonusP = document.getElementById('prestigeBonus');
        const prestigeGainP = document.getElementById('prestigeGain');
        const prestigeButton = document.getElementById('prestigeButton');

        // Load game state if available
        function loadGame() {
            const saved = localStorage.getItem('weedClickerSave');
            if (saved) {
                const data = JSON.parse(saved);
                hits = data.hits || 0;
                hitsPerSecond = data.hps || 0;
                clickValue = data.clickValue || 1;
                totalHits = data.totalHits || 0;
                totalClicks = data.totalClicks || 0;
                prestigePoints = data.prestigePoints || 0;
                prestigeBonus = 1 + (prestigePoints * 0.1); // 10% bonus per point
                shopItems.forEach((item, i) => {
                    item.owned = data.shop[i]?.owned || 0;
                    item.cost = data.shop[i]?.cost || item.cost;
                });
                upgrades.forEach((upgrade, i) => upgrade.purchased = data.upgrades[i] || false);
                achievements.forEach((ach, i) => ach.unlocked = data.achievements[i] || false);
                recalculateHPS();
            }
        }

        // Save game state
        function saveGame() {
            const data = {
                hits,
                hps: hitsPerSecond,
                clickValue,
                totalHits,
                totalClicks,
                prestigePoints,
                shop: shopItems.map(item => ({ owned: item.owned, cost: item.cost })),
                upgrades: upgrades.map(upgrade => upgrade.purchased),
                achievements: achievements.map(ach => ach.unlocked)
            };
            localStorage.setItem('weedClickerSave', JSON.stringify(data));
        }

        // Recalculate HPS
        function recalculateHPS() {
            hitsPerSecond = shopItems.reduce((total, item) => total + (item.hps * item.owned), 0) * prestigeBonus;
            hpsDisplay.textContent = `Hits per second: ${hitsPerSecond.toFixed(1)}`;
        }

        // Update displays
        function updateDisplays() {
            hitsDisplay.textContent = `Hits: ${Math.floor(hits)}`;
            totalHitsP.textContent = `Total Hits: ${Math.floor(totalHits)}`;
            totalClicksP.textContent = `Total Clicks: ${totalClicks}`;
            prestigePointsP.textContent = `Prestige Points: ${prestigePoints}`;
            prestigeBonusP.textContent = `Prestige Bonus: ${(prestigeBonus - 1) * 100}%`;
            const potentialPrestige = Math.floor(Math.sqrt(totalHits / 1000));
            prestigeGainP.textContent = `Next Prestige: ${potentialPrestige} points`;
            prestigeButton.disabled = potentialPrestige === 0;
            renderShop();
            renderUpgrades();
            renderAchievements();
            checkAchievements();
        }

        // Render shop items
        function renderShop() {
            shopItemsDiv.innerHTML = '';
            shopItems.forEach((item, index) => {
                const div = document.createElement('div');
                div.className = 'item';
                div.innerHTML = `
                    <span>${item.name} (${item.owned}) - ${item.desc}<br>Cost: ${Math.floor(item.cost)} hits - +${item.hps} HPS</span>
                    <button class="buy-button" ${hits < item.cost ? 'disabled' : ''}>Buy</button>
                `;
                div.querySelector('button').addEventListener('click', () => buyShopItem(index));
                shopItemsDiv.appendChild(div);
            });
        }

        // Buy shop item
        function buyShopItem(index) {
            const item = shopItems[index];
            if (hits >= item.cost) {
                hits -= item.cost;
                item.owned++;
                item.cost = Math.floor(item.cost * 1.15); // Cost increase
                recalculateHPS();
                updateDisplays();
                saveGame();
            }
        }

        // Render upgrades
        function renderUpgrades() {
            upgradesDiv.innerHTML = '';
            upgrades.forEach((upgrade, index) => {
                if (upgrade.purchased) return;
                const div = document.createElement('div');
                div.className = 'item';
                div.innerHTML = `
                    <span>${upgrade.name} - ${upgrade.desc}<br>Cost: ${upgrade.cost} hits</span>
                    <button class="buy-button" ${hits < upgrade.cost ? 'disabled' : ''}>Buy</button>
                `;
                div.querySelector('button').addEventListener('click', () => buyUpgrade(index));
                upgradesDiv.appendChild(div);
            });
        }

        // Buy upgrade
        function buyUpgrade(index) {
            const upgrade = upgrades[index];
            if (hits >= upgrade.cost && !upgrade.purchased) {
                hits -= upgrade.cost;
                upgrade.effect();
                upgrade.purchased = true;
                recalculateHPS();
                updateDisplays();
                saveGame();
            }
        }

        // Render achievements
        function renderAchievements() {
            achievementsDiv.innerHTML = '';
            achievements.forEach(ach => {
                const div = document.createElement('div');
                div.className = `achievement ${ach.unlocked ? '' : 'locked'}`;
                div.innerHTML = `<span>${ach.name} - ${ach.desc}</span>`;
                achievementsDiv.appendChild(div);
            });
        }

        // Check achievements
        function checkAchievements() {
            let updated = false;
            achievements.forEach(ach => {
                if (!ach.unlocked && ach.condition()) {
                    ach.unlocked = true;
                    updated = true;
                }
            });
            if (updated) {
                renderAchievements();
                saveGame();
            }
        }

        // Click event
        clickButton.addEventListener('click', () => {
            const gain = clickValue * prestigeBonus;
            hits += gain;
            totalHits += gain;
            totalClicks++;
            createParticles();
            updateDisplays();
            saveGame();
        });

        // Prestige
        prestigeButton.addEventListener('click', () => {
            const gain = Math.floor(Math.sqrt(totalHits / 1000));
            if (gain > 0) {
                if (confirm('Prestige will reset your hits, shop, and upgrades for permanent bonuses. Proceed?')) {
                    prestigePoints += gain;
                    prestigeBonus = 1 + (prestigePoints * 0.1);
                    hits = 0;
                    totalHits = 0;
                    totalClicks = 0;
                    hitsPerSecond = 0;
                    clickValue = 1;
                    shopItems.forEach(item => {
                        item.owned = 0;
                        item.cost = item.originalCost || item.cost; // Reset costs if needed
                    });
                    upgrades.forEach(upgrade => upgrade.purchased = false);
                    recalculateHPS();
                    updateDisplays();
                    saveGame();
                }
            }
        });

        // Auto hits
        setInterval(() => {
            const gain = hitsPerSecond / 10; // 10 times per second for smooth
            hits += gain;
            totalHits += gain;
            updateDisplays();
        }, 100);

        // Save every 30 seconds
        setInterval(saveGame, 30000);

        // Particles for clicks
        function createParticles() {
            const container = document.getElementById('particle-container');
            const rect = clickButton.getBoundingClientRect();
            for (let i = 0; i < 5; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.width = `${Math.random() * 10 + 5}px`;
                particle.style.height = particle.style.width;
                particle.style.left = `${rect.left + rect.width / 2 + (Math.random() * 20 - 10)}px`;
                particle.style.top = `${rect.top + rect.height / 2}px`;
                particle.style.animationDuration = `${Math.random() * 1 + 1}s`;
                container.appendChild(particle);
                setTimeout(() => particle.remove(), 2000);
            }
        }

        // Initialize
        loadGame();
        updateDisplays();
        shopItems.forEach(item => item.originalCost = item.cost); // Store original costs
    </script>
</body>
</html>
