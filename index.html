<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weed Farm Clicker</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap');

        body {
            font-family: 'Roboto', sans-serif;
            background: linear-gradient(to bottom, #87CEEB, #E0F7FA);
            color: #333;
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            overflow-y: auto;
            background-image: url('https://shared.akamai.steamstatic.com/store_item_assets/steam/apps/1055490/ss_02bd3d56836ab091f7fc6dd175d9782cb7b23322.1920x1080.jpg?t=1601838439');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }
        .overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.4);
            pointer-events: none;
        }
        .container {
            position: relative;
            z-index: 1;
            max-width: 1400px;
            width: 100%;
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            grid-template-rows: auto auto;
            gap: 20px;
        }
        .game-area {
            grid-column: 1 / 4;
            background: rgba(255, 255, 255, 0.85);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            text-align: center;
        }
        .shop-area, .upgrades-area, .achievements-area {
            background: rgba(255, 255, 255, 0.85);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
        }
        .stats-area, .prestige-area {
            grid-column: span 1;
            background: rgba(255, 255, 255, 0.85);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
        }
        .full-row {
            grid-column: 1 / 4;
        }
        h1 {
            font-size: 48px;
            color: #228B22;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }
        h2 {
            color: #006400;
            border-bottom: 2px solid #90EE90;
            padding-bottom: 10px;
        }
        #clickButton {
            background: url('https://www.clipartmax.com/png/middle/156-1563152_cannabis-icon-weed-leaf-outline-png.png') no-repeat center center;
            background-size: contain;
            width: 200px;
            height: 200px;
            border: 5px solid #228B22;
            border-radius: 50%;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 10px 20px rgba(0,0,0,0.3);
        }
        #clickButton:hover {
            transform: scale(1.1);
            box-shadow: 0 15px 30px rgba(0,0,0,0.4);
        }
        #clickButton:active {
            transform: scale(0.95);
        }
        .item.available {
            background: #f0f8f0;
            padding: 15px;
            margin: 10px 0;
            border-radius: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            transition: transform 0.2s;
        }
        .item.available:hover {
            transform: translateY(-3px);
        }
        .buy-button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            cursor: pointer;
            border-radius: 8px;
            font-weight: bold;
            transition: background 0.3s;
        }
        .buy-button:hover {
            background: #45a049;
        }
        .buy-button:disabled {
            background: #cccccc;
            cursor: not-allowed;
        }
        .achievement {
            background: #e8f5e9;
            padding: 15px;
            margin: 10px 0;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .locked {
            opacity: 0.6;
            filter: grayscale(100%);
        }
        .prestige-button {
            background: #FFD700;
            color: #000;
            border: none;
            padding: 15px;
            cursor: pointer;
            border-radius: 10px;
            width: 100%;
            font-size: 20px;
            font-weight: bold;
            box-shadow: 0 6px 12px rgba(0,0,0,0.2);
        }
        .prestige-button:hover {
            background: #ffed4e;
        }
        .prestige-button:disabled {
            background: #cccccc;
        }
        p {
            font-size: 18px;
            margin: 10px 0;
        }
        #particle-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }
        .particle {
            position: absolute;
            background: #4CAF50;
            border-radius: 50%;
            opacity: 0.8;
            animation: float 3s ease-out forwards;
        }
        @keyframes float {
            0% { transform: translateY(0) scale(1); opacity: 0.8; }
            100% { transform: translateY(-200px) scale(0); opacity: 0; }
        }
        @media (max-width: 1200px) {
            .container {
                grid-template-columns: 1fr 1fr;
            }
            .game-area, .full-row {
                grid-column: 1 / 3;
            }
            .stats-area, .prestige-area {
                grid-column: span 2;
            }
        }
        @media (max-width: 768px) {
            .container {
                grid-template-columns: 1fr;
            }
            .game-area, .shop-area, .upgrades-area, .achievements-area, .stats-area, .prestige-area {
                grid-column: 1 / 2;
            }
        }
    </style>
</head>
<body>
    <div class="overlay"></div>
    <div id="particle-container"></div>
    <div class="container">
        <div class="game-area">
            <h1>Weed Farm Clicker</h1>
            <p id="hitsDisplay">Buds: 0</p>
            <p id="hpsDisplay">Buds per second: 0</p>
            <button id="clickButton" title="Harvest Bud!"></button>
        </div>
        
        <div class="shop-area">
            <h2>Farm Shop</h2>
            <div id="shopItems"></div>
        </div>
        
        <div class="upgrades-area">
            <h2>Upgrades</h2>
            <div id="upgrades"></div>
        </div>
        
        <div class="achievements-area">
            <h2>Achievements</h2>
            <div id="achievements"></div>
        </div>
        
        <div class="stats-area full-row">
            <h2>Stats</h2>
            <p id="totalHits">Total Buds Harvested: 0</p>
            <p id="totalClicks">Total Clicks: 0</p>
            <p id="prestigePoints">Prestige Points: 0</p>
            <p id="prestigeBonus">Prestige Bonus: +0%</p>
        </div>
        
        <div class="prestige-area">
            <h2>Prestige</h2>
            <p>Reset your farm for permanent growth bonuses!</p>
            <p id="prestigeGain">Potential Gain: 0 points</p>
            <button id="prestigeButton" class="prestige-button" disabled>Prestige Now</button>
        </div>
    </div>

    <script>
        let buds = 0;
        let budsPerSecond = 0;
        let clickValue = 1;
        let totalBuds = 0;
        let totalClicks = 0;
        let prestigePoints = 0;
        let prestigeMultiplier = 1;

        const shopItems = [
            { name: 'Seed Planter', cost: 15, bps: 0.1, owned: 0, desc: 'Plants seeds automatically.' },
            { name: 'Watering System', cost: 100, bps: 1, owned: 0, desc: 'Keeps plants hydrated.' },
            { name: 'Grow Lights', cost: 500, bps: 5, owned: 0, desc: 'Accelerates growth.' },
            { name: 'Greenhouse', cost: 3000, bps: 30, owned: 0, desc: 'Controlled environment.' },
            { name: 'Hydroponic Setup', cost: 15000, bps: 150, owned: 0, desc: 'Soil-less farming.' },
            { name: 'Outdoor Field', cost: 100000, bps: 1000, owned: 0, desc: 'Massive scale planting.' },
            { name: 'Automated Harvester', cost: 500000, bps: 5000, owned: 0, desc: 'Mechanical harvesting.' },
            { name: 'Cannabis Empire', cost: 2000000, bps: 20000, owned: 0, desc: 'Global farm network.' }
        ];

        const upgrades = [
            { name: 'Better Seeds', cost: 200, effect: () => clickValue *= 2, desc: 'Doubles harvest per click.', purchased: false },
            { name: 'Fertilizer', cost: 1000, effect: () => budsPerSecond *= 1.5, desc: '50% boost to production.', purchased: false },
            { name: 'Premium Strain', cost: 5000, effect: () => clickValue *= 3, desc: 'Triples click harvest.', purchased: false },
            { name: 'Advanced Hydro', cost: 25000, effect: () => { shopItems.forEach(i => i.bps *= 1.2); recalculateBPS(); }, desc: '20% boost to all producers.', purchased: false },
            { name: 'Trimming Bots', cost: 100000, effect: () => clickValue += budsPerSecond * 0.2, desc: 'Clicks gain 20% of BPS.', purchased: false },
            { name: 'Genetic Engineering', cost: 500000, effect: () => budsPerSecond *= 2, desc: 'Doubles all production.', purchased: false }
        ];

        const achievements = [
            { name: 'First Harvest', desc: 'Harvest your first bud.', unlocked: false, condition: () => totalClicks >= 1 },
            { name: 'Bud Beginner', desc: 'Reach 420 buds.', unlocked: false, condition: () => totalBuds >= 420 },
            { name: 'Planter Pro', desc: 'Own 20 Seed Planters.', unlocked: false, condition: () => shopItems[0].owned >= 20 },
            { name: 'Green Thumb', desc: 'Reach 10,000 buds.', unlocked: false, condition: () => totalBuds >= 10000 },
            { name: 'Farm Tycoon', desc: 'Own a Cannabis Empire.', unlocked: false, condition: () => shopItems[7].owned >= 1 },
            { name: 'Prestigious Farmer', desc: 'Prestige once.', unlocked: false, condition: () => prestigePoints >= 1 },
            { name: 'Click Master', desc: 'Click 1000 times.', unlocked: false, condition: () => totalClicks >= 1000 },
            { name: 'Idle Farmer', desc: 'Reach 420 BPS.', unlocked: false, condition: () => budsPerSecond >= 420 }
        ];

        // DOM
        const budsDisplay = document.getElementById('hitsDisplay');
        const bpsDisplay = document.getElementById('hpsDisplay');
        const clickButton = document.getElementById('clickButton');
        const shopDiv = document.getElementById('shopItems');
        const upgradesDiv = document.getElementById('upgrades');
        const achDiv = document.getElementById('achievements');
        const totalBudsP = document.getElementById('totalHits');
        const totalClicksP = document.getElementById('totalClicks');
        const prestigePointsP = document.getElementById('prestigePoints');
        const prestigeBonusP = document.getElementById('prestigeBonus');
        const prestigeGainP = document.getElementById('prestigeGain');
        const prestigeBtn = document.getElementById('prestigeButton');

        function loadGame() {
            const saved = localStorage.getItem('weedFarmClickerSave');
            if (saved) {
                const data = JSON.parse(saved);
                buds = data.buds || 0;
                budsPerSecond = data.bps || 0;
                clickValue = data.clickValue || 1;
                totalBuds = data.totalBuds || 0;
                totalClicks = data.totalClicks || 0;
                prestigePoints = data.prestigePoints || 0;
                prestigeMultiplier = 1 + prestigePoints * 0.1;
                shopItems.forEach((item, i) => {
                    if (data.shop && data.shop[i]) {
                        item.owned = data.shop[i].owned;
                        item.cost = data.shop[i].cost;
                    }
                });
                upgrades.forEach((u, i) => u.purchased = data.upgrades ? data.upgrades[i] : false);
                achievements.forEach((a, i) => a.unlocked = data.achievements ? data.achievements[i] : false);
                recalculateBPS();
            }
        }

        function saveGame() {
            const data = {
                buds, bps: budsPerSecond, clickValue, totalBuds, totalClicks, prestigePoints,
                shop: shopItems.map(i => ({owned: i.owned, cost: i.cost})),
                upgrades: upgrades.map(u => u.purchased),
                achievements: achievements.map(a => a.unlocked)
            };
            localStorage.setItem('weedFarmClickerSave', JSON.stringify(data));
        }

        function recalculateBPS() {
            budsPerSecond = shopItems.reduce((sum, item) => sum + item.bps * item.owned, 0) * prestigeMultiplier;
            bpsDisplay.textContent = `Buds per second: ${budsPerSecond.toFixed(1)}`;
        }

        function updateDisplays() {
            budsDisplay.textContent = `Buds: ${Math.floor(buds)}`;
            totalBudsP.textContent = `Total Buds Harvested: ${Math.floor(totalBuds)}`;
            totalClicksP.textContent = `Total Clicks: ${totalClicks}`;
            prestigePointsP.textContent = `Prestige Points: ${prestigePoints}`;
            prestigeBonusP.textContent = `Prestige Bonus: +${(prestigeMultiplier - 1) * 100}%`;
            const gain = Math.floor(Math.sqrt(totalBuds / 5000));
            prestigeGainP.textContent = `Potential Gain: ${gain} points`;
            prestigeBtn.disabled = gain <= 0;
            renderShop();
            renderUpgrades();
            renderAchievements();
            checkAchievements();
        }

        function renderShop() {
            shopDiv.innerHTML = '';
            shopItems.forEach((item, idx) => {
                const el = document.createElement('div');
                el.className = 'item available';
                el.innerHTML = `
                    <div>
                        <strong>${item.name} (${item.owned})</strong><br>
                        ${item.desc}<br>
                        Cost: ${Math.floor(item.cost)} buds | +${item.bps} BPS
                    </div>
                    <button class="buy-button" ${buds < item.cost ? 'disabled' : ''}>Buy</button>
                `;
                el.querySelector('button').onclick = () => buyItem(idx);
                shopDiv.appendChild(el);
            });
        }

        function renderUpgrades() {
            upgradesDiv.innerHTML = '';
            upgrades.forEach((u, idx) => {
                if (u.purchased) return;
                const el = document.createElement('div');
                el.className = 'item available';
                el.innerHTML = `
                    <div>
                        <strong>${u.name}</strong><br>
                        ${u.desc}<br>
                        Cost: ${u.cost} buds
                    </div>
                    <button class="buy-button" ${buds < u.cost ? 'disabled' : ''}>Buy</button>
                `;
                el.querySelector('button').onclick = () => buyUpgrade(idx);
                upgradesDiv.appendChild(el);
            });
        }

        function buyItem(idx) {
            const item = shopItems[idx];
            if (buds >= item.cost) {
                buds -= item.cost;
                item.owned++;
                item.cost = Math.floor(item.cost * 1.15);
                recalculateBPS();
                updateDisplays();
                saveGame();
            }
        }

        function buyUpgrade(idx) {
            const u = upgrades[idx];
            if (buds >= u.cost && !u.purchased) {
                buds -= u.cost;
                u.effect();
                u.purchased = true;
                recalculateBPS();
                updateDisplays();
                saveGame();
            }
        }

        function renderAchievements() {
            achDiv.innerHTML = '';
            achievements.forEach(a => {
                const el = document.createElement('div');
                el.className = `achievement ${a.unlocked ? '' : 'locked'}`;
                el.innerHTML = `<strong>${a.name}</strong><br>${a.desc}`;
                achDiv.appendChild(el);
            });
        }

        function checkAchievements() {
            let updated = false;
            achievements.forEach(a => {
                if (!a.unlocked && a.condition()) {
                    a.unlocked = true;
                    updated = true;
                }
            });
            if (updated) renderAchievements();
        }

        clickButton.addEventListener('click', () => {
            const gain = clickValue * prestigeMultiplier;
            buds += gain;
            totalBuds += gain;
            totalClicks++;
            createParticles();
            updateDisplays();
            saveGame();
        });

        prestigeBtn.addEventListener('click', () => {
            const gain = Math.floor(Math.sqrt(totalBuds / 5000));
            if (gain > 0 && confirm('Prestige? This will reset everything for permanent bonuses!')) {
                prestigePoints += gain;
                prestigeMultiplier = 1 + prestigePoints * 0.1;
                buds = 0;
                totalBuds = 0;
                totalClicks = 0;
                budsPerSecond = 0;
                clickValue = 1;
                shopItems.forEach(i => { i.owned = 0; i.cost = i.originalCost || i.cost; });
                upgrades.forEach(u => u.purchased = false);
                recalculateBPS();
                updateDisplays();
                saveGame();
            }
        });

        setInterval(() => {
            if (budsPerSecond > 0) {
                const gain = budsPerSecond / 10;
                buds += gain;
                totalBuds += gain;
                updateDisplays();
            }
        }, 100);

        setInterval(saveGame, 30000);

        function createParticles() {
            const container = document.getElementById('particle-container');
            const rect = clickButton.getBoundingClientRect();
            for (let i = 0; i < 8; i++) {
                const p = document.createElement('div');
                p.className = 'particle';
                p.style.width = `${Math.random() * 15 + 10}px`;
                p.style.height = p.style.width;
                p.style.left = `${rect.left + rect.width / 2 + (Math.random() * 60 - 30)}px`;
                p.style.top = `${rect.top + rect.height / 2}px`;
                p.style.background = `hsl(${100 + Math.random() * 40}, 70%, 50%)`;
                container.appendChild(p);
                setTimeout(() => p.remove(), 3000);
            }
        }

        // Init
        shopItems.forEach(i => i.originalCost = i.cost);
        loadGame();
        updateDisplays();
    </script>
</body>
</html>
